# HBase

This folder contains a Docker-based setup for HBase. The database can be used to import the sequencefiles generated by the Syncer.

You need to manualy import the sequencefiles generated by the **syncer** service to the HBase database (commands are provided below) and manually create the tables before importing the data.

The HBase ZooKeper is exposed on port `2181` and Thrift on port `9090`.

## Common used commands for development
- Start HBase shell: `docker compose exec hbase /bin/bash`
- Create table: `create 'table_name', 'cf'` (there is only one column family in solana called `x`) (e.g. `create 'blocks', 'x'`)
- List tables: `list`
- Scan table: `scan 'table_name'` (e.g. `scan 'blocks'`, or `scan 'test-table', {'LIMIT' => 5}`)
- Import data: `hbase org.apache.hadoop.hbase.mapreduce.Driver import table_name /output/sequencefile/table_name` (e.g. `hbase org.apache.hadoop.hbase.mapreduce.Driver import blocks /output/sequencefile/blocks`, run this command from the docker container, not from the hbase shell)
